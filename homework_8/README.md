### Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.


### **Ответ:**


### Расчет необходимых ресурсвов для приложения (без учета ноды):

####  Минимальные требуемые ресурсы для кластера Kubernetes

| Компонент | Количество подов | CPU | Memory | Диск |
|-----------|------------------|----------------|-------------------|------|
| **База данных** | 3 | 3 ядра | 12 GiB | 45 GiB |
| **Кэш** | 3 | 3 ядра | 12 GiB | 15 GiB |
| **Бэкенд** | 10 | 10 ядер | 5.86 GiB | - |
| **Фронтенд** | 5 | 1 ядро | 250 MiB | - |
| **Ingress Controller** | 2 | 200m | 400 MiB | - |
| **Итого** | **23 пода** | **~17.2 CPU** | **31.5 GiB RAM** | **~60 GiB** |


#### 1) Отказоустойчивая БД, 3 копии.

####  Будем использовать StatefulSet с отдельными PVC для каждого пода.
 
 - Вычислительные ресурсы на один под:
      - requests.cpu: 1
      - limits.cpu: 1.5
      - requests.memory: 4Gi
      - limits.memory: 4Gi
      
 - Дисковое пространство:
      - PersistentVolumeClaim: 10-20 Gi на каждый под . Тип диска storage class должен быть ssd или fast-ssd для производительности.

 - Сервис: 
      - Headless Service для управления сетевым взаимодействием внутри StatefulSet.
#### 2) Кэш, отказоустойчивый, 3 копии.

#### Для отказоустойчивого кеша с разделяемыми данными между репликами идеально подходит Redis в режиме Sentinel или Cluster.

  - Вычислительные ресурсы на один под:
      - requests.cpu: 1
      - limits.cpu: 1.5
      - requests.memory: 4Gi
      - limits.memory: 4Gi
      
  - Дисковое пространство:
      - PersistentVolumeClaim: 5-10 Gi на каждый под.

#### 3) Бэкенд, 10 копий:

  - Вычислительные ресурсы на один под:
      - requests.cpu: 1
      - limits.cpu: 1.5
      - requests.memory: 600Mi
      - limits.memory: 800Mi (с запасом)

#### 4) Фронтенд, 5 копий

   - Вычислительные ресурсы на один под:
       - requests.cpu: 200m (0.2)
       - limits.cpu: 500m
       - requests.memory: 50Mi
       - limits.memory: 100Mi

#### 5) Ingress Controller, например LoadBalancer:

   - Вычислительные ресурсы на одну реплику, которые зависят от выбранного контроллера:
       - requests.cpu: 100m
       - requests.memory: 200Mi

### Итого: Для старта проекта необходимо обеспечить Kubernetes-кластер с минимальной мощностью 20 ядер CPU, 40 GiB ОЗУ и 70 GiB быстрого дискового пространства, разбитый как минимум на 3 ноды.
